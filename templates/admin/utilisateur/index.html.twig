{% extends 'base.html.twig' %}

{% block title %}Gestion des Utilisateurs
{% endblock %}

{% block body %}
	<h1 class="mb-4">Liste des utilisateurs</h1>

	<table class="table table-striped table-hover">
		<thead class="table-danger">
			<tr>
				<th>Nom</th>
				<th>Email</th>
				<th>Admin</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			{% for user in users %}
				<tr>
					<td>{{ user.name }}</td>
					<td>{{ user.email }}</td>
					<td>
						{% if user.admin %}
							<span class="badge bg-success">Oui</span>
						{% else %}
							<span class="badge bg-secondary">Non</span>
						{% endif %}
					</td>
					<td>
						<a href="{{ path('admin_users_edit', {id: user.id}) }}" class="btn btn-warning btn-sm">Modifier</a>
						<form method="POST" action="{{ path('admin_users_delete', {id: user.id}) }}" onsubmit="return confirm('Supprimer cet utilisateur ?')" class="d-inline">
							<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
							<button class="btn btn-danger btn-sm">Supprimer</button>
						</form>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
{% endblock %}
